<div class="accordion" ngxdAccordion>
  <ng-container *ngIf="!!accordionItems?.length; else loadingTpl">
    <ng-container *ngFor="let item of accordionItems; trackBy: trackByFn" 
      [ngTemplateOutlet]="accordItemTmpl"
      [ngTemplateOutletContext]="{ $implicit: item }">
    </ng-container>
  </ng-container>
</div>

<ng-template #accordItemTmpl let-item>
  <ngxd-accordion-item 
    [ngxdAccordionItem]="item"
    [isNumbered]="isNumbered" 
    [bodyDblckcClose]="bodyDblckcClose"
    [openSign]="openSign" 
    [closeSign]="closeSign" 
    [logo]="listLogo" 
    [styling]="itemStyle"
    [attr.data-idx]="item.itemId" 
    [id]="item.id" 
    (toggled)="onItemToggled($event)" 
    @accordItemsIn
  >
  </ngxd-accordion-item>
</ng-template>

<ng-template #defloadingTpl>
  <style>
    .loading {
      display: block;
      background-color: transparent;
      min-width: 50px;
      min-height: 50px;
      animation: rotate 1s ease-out infinite;
      border-radius: 50%;
    }
    .loading > svg {
      transform: rotate(90deg);
      fill: var(--dark-bg);
    }
    .loading > svg rect:first-of-type {
      fill: var(--darker-color);
    }
    .loading > svg rect:nth-of-type(2) {
      fill: var(--accent-color);
    }
    .loading > svg rect:n-of-type(3) {
      fill: var(--dark-blue-color);
    }
  </style>
  <div class="loading" @spinnerIn>
    <svg width="51px" height="50px" viewBox="0 0 51 50">
      <rect y="0" width="13" height="50">
          <animate attributeName="height" values="50;10;50" begin="0s" dur="1s" repeatCount="indefinite" />
          <animate attributeName="y" values="0;20;0" begin="0s" dur="1s" repeatCount="indefinite" />
      </rect>
      <rect x="19" y="0" width="13" height="50">
          <animate attributeName="height" values="50;10;50" begin="0.2s" dur="1s" repeatCount="indefinite" />
          <animate attributeName="y" values="0;20;0" begin="0.2s" dur="1s" repeatCount="indefinite" />
      </rect>
      <rect x="38" y="0" width="13" height="50">
          <animate attributeName="height" values="50;10;50" begin="0.4s" dur="1s" repeatCount="indefinite" />
          <animate attributeName="y" values="0;20;0" begin="0.4s" dur="1s" repeatCount="indefinite" />
      </rect>
    </svg>
  </div>
</ng-template>